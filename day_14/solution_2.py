with open("input.txt", "r") as input_file:
    pos = []
    vel = []
    for line in input_file.readlines():
        a, b = line.split()
        x_str, y_str = a.split(",")
        xv_str, yv_str = b.split(",")

        pos.append((int(x_str[2:]), int(y_str)))
        vel.append((int(xv_str[2:]), int(yv_str)))

    robot_count = len(pos)
    h, w = 103, 101
    step = 0

    while True:
        suspicious_activity = False
        grid = [[0 for _ in range(w)] for _ in range(h)]
        for x, y in pos:
            grid[y][x] += 1
        for y in range(h):
            conecutive_robot_counter = 0
            for x in range(w):
                if grid[y][x] > 0:
                    conecutive_robot_counter += 1
                    if conecutive_robot_counter > 10:
                        suspicious_activity = True
                else:
                    conecutive_robot_counter = 0

        if suspicious_activity:
            # Show current state
            print(f"\nAfter #{step} steps:")
            for y in range(h):
                for x in range(w):
                    if grid[y][x] == 0:
                        print(end=".")
                    else:
                        print(end="X")
                print()
            input()  # Wait for me!

        # Update robot positions
        for i in range(robot_count):
            x, y = pos[i]
            vx, vy = vel[i]
            pos[i] = ((x + vx + w) % w, (y + vy + h) % h)
        step += 1

    # Write output manually after observing Christmas tree


"""
After #6512 steps:
...........................................X.......................................................X.
.........................................XX................................................X.......X.
.............................X............................................X.................X........
.....................................................................X.....................X.........
.X.................X..............X..................................................................
.......................................................X.............................................
....................................................X................................................
.....................................................................................................
.......X.............................................................................................
....................X................................................................................
.....................................................................................................
.....................................................................................................
.....................................................................................................
................................................................................................X....
..................................................................................................X..
.........X...........................................................................................
...............................................................................................X.....
.....X....................................................................X..........................
..........................X.....X.......X............................................................
....................................................................................................X
....................................................X....X..................X........................
................................X...........X..............................X.........................
...........................................X.............................X...........................
......................................................................................X..............
.......................................................X.........X...................................
...............................................................................................X.....
................................................................................X....................
...........................................X.........................................................
...........X....X...............................X...........................................X........
.........X...................................X..................X......................X.............
..........................................X..................................X.......................
.................................................X.....................X..........................X..
.....................................................................................................
...................X....................................................................X....X.......
...........................X.X........................X............X...............................X.
..........................................................X..................................X.......
.....X...........................................................X..............X....................
.....................X........................................X....................X.............X...
.......................................................................X.............................
............................................................................X........................
..X...............................................X..................................X...............
.....................................................................................................
....X.............................XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX....................................
..................................X.............................X....................................
..................................X.............................X........................X...........
............................X.....X.............................X....................................
.......................X..........X.............................X....................................
..................................X..............X..............X..................X.................
..................................X.............XXX.............X....................................
..................................X............XXXXX............X....................................
.....................X............X...........XXXXXXX...........X....................................
..................................X..........XXXXXXXXX..........X....................................
.....................X............X............XXXXX............X.......................X............
........X.........................X...........XXXXXXX...........X....................................
..................................X..........XXXXXXXXX..........X..............................X.....
..................................X.........XXXXXXXXXXX.........X....................X...............
..................................X........XXXXXXXXXXXXX........X....................................
..................................X..........XXXXXXXXX..........X.........X..........X...............
..............................X...X.........XXXXXXXXXXX.........X....................................
...............................X..X........XXXXXXXXXXXXX........X................X...................
..................................X.......XXXXXXXXXXXXXXX.......X........................X...........
...............................X..X......XXXXXXXXXXXXXXXXX......X....................................
...................X..............X........XXXXXXXXXXXXX........X....................................
..................X...............X.......XXXXXXXXXXXXXXX.......X.............X......................
..................................X......XXXXXXXXXXXXXXXXX......X....................................
..................................X.....XXXXXXXXXXXXXXXXXXX.....X....................................
..............X...................X....XXXXXXXXXXXXXXXXXXXXX....X....................................
..................................X.............XXX.............X....................................
....X.........X...................X.............XXX.............X....................................
X.....X...........................X.............XXX.............X...............X....................
.............X....................X.............................X....................................
............................X.....X.............................X....................................
..................................X.............................X....................................
..................................X.............................X...............................X....
..................................XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX....................................
...................................................................X................X................
..................................................X..................................................
........X...............................................X..............................X.............
.....................................................................................................
.....................................................................................................
.................................................................................X...................
.....................................................X...............................................
...............................................X.....................................................
..............................................................................X......................
.....................X...............................................................................
..............X..................................................XX..................................
..............................X........................X..X.....................................X....
................X....................................................................................
.....................................................................................................
...................................................................................X.................
...X...................X.............................................................................
..X..........X..............................................X......................................X.
.....................X.......................................................................X.......
.....X...................X...........................................................................
........X......................................................................................X.....
...............................X...........X....X....................................................
.....................................................................................................
.................X...................................................................................
...X......................................................................X..........................
.....................................................................................................
.....................................................................................................
..................................X........................X.........................................
.....................................................................................................
"""
